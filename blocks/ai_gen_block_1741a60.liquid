{% doc %}
  @prompt
    Generate me a category slider for me. the shape and size should be adjustable both circle and square. collection will be get picked up from shopify also should be option for adding custom collection image, i don't want arrow keys on mobile version , i want this styling: Border
    Border width
    
    1
    Border color
    
    #E0E0E0
    Hover border color
    
    #CCCCCC
    Border radius
    
    8
    Shadow
    Horizontal offset
    
    -7
    Vertical offset
    
    1
    Blur radius
    
    4
    Shadow opacity
    
    0
    in collections. also add a border color option for collections , add top and bottom padding option , top and bottom padding not working on mobile version. fix it
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-category-slider-{{ ai_gen_id }} {
    width: 100%;
    overflow: hidden;
    padding-top: {{ block.settings.padding_top }}px;
    padding-bottom: {{ block.settings.padding_bottom }}px;
  }

  .ai-category-slider__header-{{ ai_gen_id }} {
    text-align: {{ block.settings.heading_alignment }};
    margin-bottom: {{ block.settings.heading_spacing }}px;
  }

  .ai-category-slider__title-{{ ai_gen_id }} {
    font-size: {{ block.settings.heading_size }}px;
    color: {{ block.settings.heading_color }};
    margin: 0;
  }

  .ai-category-slider__container-{{ ai_gen_id }} {
    position: relative;
    padding: 0 20px;
  }

  .ai-category-slider__track-{{ ai_gen_id }} {
    display: flex;
    gap: {{ block.settings.item_spacing }}px;
    overflow-x: auto;
    scroll-behavior: smooth;
    scrollbar-width: none;
    -ms-overflow-style: none;
    padding: 10px 0;
  }

  .ai-category-slider__track-{{ ai_gen_id }}::-webkit-scrollbar {
    display: none;
  }

  .ai-category-slider__item-{{ ai_gen_id }} {
    flex: 0 0 auto;
    width: {{ block.settings.item_size }}px;
    text-align: center;
  }

  .ai-category-slider__link-{{ ai_gen_id }} {
    display: block;
    text-decoration: none;
    color: inherit;
  }

  .ai-category-slider__image-wrapper-{{ ai_gen_id }} {
    position: relative;
    width: {{ block.settings.item_size }}px;
    height: {{ block.settings.item_size }}px;
    margin: 0 auto {{ block.settings.title_spacing }}px;
    overflow: hidden;
    {% if block.settings.shape == 'circle' %}
      border-radius: 50%;
    {% elsif block.settings.shape == 'square' %}
      border-radius: {{ block.settings.border_radius }}px;
    {% endif %}
    background-color: {{ block.settings.placeholder_bg_color }};
    border: {{ block.settings.border_width }}px solid {{ block.settings.border_color }};
    transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    {% assign shadow_opacity_decimal = block.settings.shadow_opacity | divided_by: 100.0 %}
    box-shadow: {{ block.settings.shadow_horizontal }}px {{ block.settings.shadow_vertical }}px {{ block.settings.shadow_blur }}px rgba(0, 0, 0, {{ shadow_opacity_decimal }});
  }

  .ai-category-slider__link-{{ ai_gen_id }}:hover .ai-category-slider__image-wrapper-{{ ai_gen_id }} {
    {% if block.settings.enable_hover_effect %}
      transform: scale(1.1);
    {% endif %}
    border-color: {{ block.settings.hover_border_color }};
  }

  .ai-category-slider__image-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-category-slider__placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-category-slider__placeholder-{{ ai_gen_id }} svg {
    width: 60%;
    height: 60%;
    opacity: 0.3;
  }

  .ai-category-slider__name-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_size }}px;
    color: {{ block.settings.title_color }};
    font-weight: {{ block.settings.title_weight }};
    margin: 0;
    word-wrap: break-word;
  }

  .ai-category-slider__nav-{{ ai_gen_id }} {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: {{ block.settings.nav_bg_color }};
    color: {{ block.settings.nav_icon_color }};
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
    transition: background-color 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .ai-category-slider__nav-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.nav_hover_bg_color }};
  }

  .ai-category-slider__nav-{{ ai_gen_id }}--prev {
    left: 0;
  }

  .ai-category-slider__nav-{{ ai_gen_id }}--next {
    right: 0;
  }

  .ai-category-slider__nav-{{ ai_gen_id }} svg {
    width: 20px;
    height: 20px;
  }

  @media screen and (max-width: 749px) {
    .ai-category-slider-{{ ai_gen_id }} {
      padding-top: {{ block.settings.padding_top }}px;
      padding-bottom: {{ block.settings.padding_bottom }}px;
    }

    .ai-category-slider__nav-{{ ai_gen_id }} {
      display: none;
    }

    .ai-category-slider__container-{{ ai_gen_id }} {
      padding: 0;
    }

    .ai-category-slider__item-{{ ai_gen_id }} {
      width: {{ block.settings.item_size | times: 0.8 }}px;
    }

    .ai-category-slider__image-wrapper-{{ ai_gen_id }} {
      width: {{ block.settings.item_size | times: 0.8 }}px;
      height: {{ block.settings.item_size | times: 0.8 }}px;
    }

    .ai-category-slider__title-{{ ai_gen_id }} {
      font-size: {{ block.settings.heading_size | times: 0.8 }}px;
    }

    .ai-category-slider__name-{{ ai_gen_id }} {
      font-size: {{ block.settings.title_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<category-slider-{{ ai_gen_id }} class="ai-category-slider-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  {% if block.settings.heading != blank %}
    <div class="ai-category-slider__header-{{ ai_gen_id }}">
      <h2 class="ai-category-slider__title-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
    </div>
  {% endif %}

  <div class="ai-category-slider__container-{{ ai_gen_id }}">
    {% if block.settings.show_navigation %}
      <button class="ai-category-slider__nav-{{ ai_gen_id }} ai-category-slider__nav-{{ ai_gen_id }}--prev" aria-label="Previous">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
    {% endif %}

    <div class="ai-category-slider__track-{{ ai_gen_id }}">
      {% for i in (1..10) %}
        {% liquid
          assign collection_key = 'collection_' | append: i
          assign custom_image_key = 'custom_image_' | append: i
          assign custom_title_key = 'custom_title_' | append: i
          assign custom_url_key = 'custom_url_' | append: i

          assign collection = block.settings[collection_key]
          assign custom_image = block.settings[custom_image_key]
          assign custom_title = block.settings[custom_title_key]
          assign custom_url = block.settings[custom_url_key]

          if collection != blank or custom_image != blank or custom_title != blank
            assign show_item = true
          else
            assign show_item = false
          endif

          if custom_title != blank
            assign item_title = custom_title
          elsif collection != blank
            assign item_title = collection.title
          else
            assign item_title = ''
          endif

          if custom_url != blank
            assign item_url = custom_url
          elsif collection != blank
            assign item_url = collection.url
          else
            assign item_url = '#'
          endif

          if custom_image != blank
            assign item_image = custom_image
          elsif collection != blank and collection.image != blank
            assign item_image = collection.image
          elsif collection != blank and collection.featured_image != blank
            assign item_image = collection.featured_image
          else
            assign item_image = null
          endif
        %}

        {% if show_item %}
          <div class="ai-category-slider__item-{{ ai_gen_id }}">
            <a href="{{ item_url }}" class="ai-category-slider__link-{{ ai_gen_id }}">
              <div class="ai-category-slider__image-wrapper-{{ ai_gen_id }}">
                {% if item_image != null %}
                  <img
                    src="{{ item_image | image_url: width: 400 }}"
                    alt="{{ item_title | escape }}"
                    class="ai-category-slider__image-{{ ai_gen_id }}"
                    loading="lazy"
                    width="400"
                    height="400"
                  >
                {% else %}
                  <div class="ai-category-slider__placeholder-{{ ai_gen_id }}">
                    {{ 'collection-1' | placeholder_svg_tag }}
                  </div>
                {% endif %}
              </div>
              {% if item_title != blank %}
                <h3 class="ai-category-slider__name-{{ ai_gen_id }}">{{ item_title }}</h3>
              {% endif %}
            </a>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    {% if block.settings.show_navigation %}
      <button class="ai-category-slider__nav-{{ ai_gen_id }} ai-category-slider__nav-{{ ai_gen_id }}--next" aria-label="Next">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
    {% endif %}
  </div>
</category-slider-{{ ai_gen_id }}>

<script>
  (function() {
    class CategorySlider{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.track = this.querySelector('.ai-category-slider__track-{{ ai_gen_id }}');
        this.prevButton = this.querySelector('.ai-category-slider__nav-{{ ai_gen_id }}--prev');
        this.nextButton = this.querySelector('.ai-category-slider__nav-{{ ai_gen_id }}--next');

        if (this.prevButton && this.nextButton) {
          this.setupNavigation();
        }
      }

      setupNavigation() {
        this.prevButton.addEventListener('click', () => {
          const scrollAmount = this.track.offsetWidth * 0.8;
          this.track.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
        });

        this.nextButton.addEventListener('click', () => {
          const scrollAmount = this.track.offsetWidth * 0.8;
          this.track.scrollBy({ left: scrollAmount, behavior: 'smooth' });
        });
      }
    }

    customElements.define('category-slider-{{ ai_gen_id }}', CategorySlider{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Category slider",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Shop by category"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 32
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#000000"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "range",
      "id": "heading_spacing",
      "min": 10,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Heading spacing",
      "default": 30
    },
    {
      "type": "header",
      "content": "Item style"
    },
    {
      "type": "select",
      "id": "shape",
      "label": "Shape",
      "options": [
        {
          "value": "circle",
          "label": "Circle"
        },
        {
          "value": "square",
          "label": "Square"
        }
      ],
      "default": "circle"
    },
    {
      "type": "range",
      "id": "item_size",
      "min": 80,
      "max": 300,
      "step": 10,
      "unit": "px",
      "label": "Item size",
      "default": 150
    },
    {
      "type": "range",
      "id": "item_spacing",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Space between items",
      "default": 20
    },
    {
      "type": "color",
      "id": "placeholder_bg_color",
      "label": "Placeholder background",
      "default": "#f5f5f5"
    },
    {
      "type": "checkbox",
      "id": "enable_hover_effect",
      "label": "Enable hover effect",
      "default": true
    },
    {
      "type": "header",
      "content": "Border"
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 1
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#e0e0e0"
    },
    {
      "type": "color",
      "id": "hover_border_color",
      "label": "Hover border color",
      "default": "#cccccc"
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Border radius",
      "info": "Only applies to square shape",
      "default": 8
    },
    {
      "type": "header",
      "content": "Shadow"
    },
    {
      "type": "range",
      "id": "shadow_horizontal",
      "min": -32,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Horizontal offset",
      "default": -7
    },
    {
      "type": "range",
      "id": "shadow_vertical",
      "min": -32,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Vertical offset",
      "default": 1
    },
    {
      "type": "range",
      "id": "shadow_blur",
      "min": 0,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Blur radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "shadow_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Shadow opacity",
      "default": 0
    },
    {
      "type": "header",
      "content": "Title style"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Title size",
      "default": 14
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#000000"
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Title weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi-bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "500"
    },
    {
      "type": "range",
      "id": "title_spacing",
      "min": 5,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Space below image",
      "default": 10
    },
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "checkbox",
      "id": "show_navigation",
      "label": "Show navigation arrows",
      "default": true
    },
    {
      "type": "color",
      "id": "nav_bg_color",
      "label": "Navigation background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "nav_hover_bg_color",
      "label": "Navigation hover background",
      "default": "#f5f5f5"
    },
    {
      "type": "color",
      "id": "nav_icon_color",
      "label": "Navigation icon color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Top padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Bottom padding",
      "default": 40
    },
    {
      "type": "header",
      "content": "Category 1"
    },
    {
      "type": "collection",
      "id": "collection_1",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "custom_image_1",
      "label": "Custom image",
      "info": "Overrides collection image"
    },
    {
      "type": "text",
      "id": "custom_title_1",
      "label": "Custom title",
      "info": "Overrides collection title"
    },
    {
      "type": "url",
      "id": "custom_url_1",
      "label": "Custom URL",
      "info": "Overrides collection URL"
    },
    {
      "type": "header",
      "content": "Category 2"
    },
    {
      "type": "collection",
      "id": "collection_2",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "custom_image_2",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "custom_title_2",
      "label": "Custom title"
    },
    {
      "type": "url",
      "id": "custom_url_2",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Category 3"
    },
    {
      "type": "collection",
      "id": "collection_3",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "custom_image_3",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "custom_title_3",
      "label": "Custom title"
    },
    {
      "type": "url",
      "id": "custom_url_3",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Category 4"
    },
    {
      "type": "collection",
      "id": "collection_4",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "custom_image_4",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "custom_title_4",
      "label": "Custom title"
    },
    {
      "type": "url",
      "id": "custom_url_4",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Category 5"
    },
    {
      "type": "collection",
      "id": "collection_5",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "custom_image_5",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "custom_title_5",
      "label": "Custom title"
    },
    {
      "type": "url",
      "id": "custom_url_5",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Category 6"
    },
    {
      "type": "collection",
      "id": "collection_6",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "custom_image_6",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "custom_title_6",
      "label": "Custom title"
    },
    {
      "type": "url",
      "id": "custom_url_6",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Category 7"
    },
    {
      "type": "collection",
      "id": "collection_7",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "custom_image_7",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "custom_title_7",
      "label": "Custom title"
    },
    {
      "type": "url",
      "id": "custom_url_7",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Category 8"
    },
    {
      "type": "collection",
      "id": "collection_8",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "custom_image_8",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "custom_title_8",
      "label": "Custom title"
    },
    {
      "type": "url",
      "id": "custom_url_8",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Category 9"
    },
    {
      "type": "collection",
      "id": "collection_9",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "custom_image_9",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "custom_title_9",
      "label": "Custom title"
    },
    {
      "type": "url",
      "id": "custom_url_9",
      "label": "Custom URL"
    },
    {
      "type": "header",
      "content": "Category 10"
    },
    {
      "type": "collection",
      "id": "collection_10",
      "label": "Collection"
    },
    {
      "type": "image_picker",
      "id": "custom_image_10",
      "label": "Custom image"
    },
    {
      "type": "text",
      "id": "custom_title_10",
      "label": "Custom title"
    },
    {
      "type": "url",
      "id": "custom_url_10",
      "label": "Custom URL"
    }
  ],
  "presets": [
    {
      "name": "Category slider"
    }
  ]
}
{% endschema %}
