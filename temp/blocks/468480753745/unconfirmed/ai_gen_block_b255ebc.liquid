{% doc %}
  @prompt
    The offer cards use a light background with orange dashed borders to draw attention without being overwhelming. Rounded corners add a friendly touch. Clear discount text, bold coupon codes, and a contrasting copy button make it instantly usable. Card spacing and carousel indicators ensure clean presentation and easy navigation., i want small card size not so big like now. also first card should be in the center. now it clishing on the left on mobile version, make the offer card more smaller 
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-offer-cards-{{ ai_gen_id }} {
    padding: 32px 20px;
    background-color: {{ block.settings.section_background }};
  }

  .ai-offer-cards__container-{{ ai_gen_id }} {
    max-width: 1200px;
    margin: 0 auto;
  }

  .ai-offer-cards__header-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: 24px;
  }

  .ai-offer-cards__title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_size }}px;
    color: {{ block.settings.title_color }};
    margin: 0 0 8px;
  }

  .ai-offer-cards__subtitle-{{ ai_gen_id }} {
    font-size: {{ block.settings.subtitle_size }}px;
    color: {{ block.settings.subtitle_color }};
    margin: 0;
  }

  .ai-offer-cards__carousel-wrapper-{{ ai_gen_id }} {
    position: relative;
    overflow: hidden;
  }

  .ai-offer-cards__carousel-{{ ai_gen_id }} {
    display: flex;
    gap: 12px;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    scrollbar-width: none;
    -ms-overflow-style: none;
    padding: 8px 0;
  }

  .ai-offer-cards__carousel-{{ ai_gen_id }}::-webkit-scrollbar {
    display: none;
  }

  .ai-offer-card-{{ ai_gen_id }} {
    flex: 0 0 calc(33.333% - 8px);
    min-width: 200px;
    max-width: 280px;
    background-color: {{ block.settings.card_background }};
    border: {{ block.settings.border_width }}px dashed {{ block.settings.border_color }};
    border-radius: {{ block.settings.card_border_radius }}px;
    padding: 16px;
    scroll-snap-align: start;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .ai-offer-card__badge-{{ ai_gen_id }} {
    display: inline-block;
    background-color: {{ block.settings.badge_background }};
    color: {{ block.settings.badge_text_color }};
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    align-self: flex-start;
  }

  .ai-offer-card__discount-{{ ai_gen_id }} {
    font-size: {{ block.settings.discount_size }}px;
    font-weight: 700;
    color: {{ block.settings.discount_color }};
    margin: 0;
    line-height: 1.1;
  }

  .ai-offer-card__description-{{ ai_gen_id }} {
    font-size: 12px;
    color: {{ block.settings.description_color }};
    margin: 0;
    line-height: 1.4;
  }

  .ai-offer-card__code-wrapper-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: auto;
  }

  .ai-offer-card__code-{{ ai_gen_id }} {
    flex: 1;
    background-color: {{ block.settings.code_background }};
    border: 2px solid {{ block.settings.code_border_color }};
    border-radius: 6px;
    padding: 8px 10px;
    font-size: 13px;
    font-weight: 700;
    color: {{ block.settings.code_text_color }};
    text-align: center;
    letter-spacing: 0.5px;
  }

  .ai-offer-card__copy-btn-{{ ai_gen_id }} {
    background-color: {{ block.settings.button_background }};
    color: {{ block.settings.button_text_color }};
    border: none;
    border-radius: 6px;
    padding: 8px 12px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;
  }

  .ai-offer-card__copy-btn-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_background }};
    transform: translateY(-2px);
  }

  .ai-offer-card__copy-btn-{{ ai_gen_id }}.copied {
    background-color: {{ block.settings.success_color }};
  }

  .ai-offer-card__expiry-{{ ai_gen_id }} {
    font-size: 10px;
    color: {{ block.settings.expiry_color }};
    margin: 0;
    text-align: center;
  }

  .ai-offer-cards__indicators-{{ ai_gen_id }} {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin-top: 20px;
  }

  .ai-offer-cards__indicator-{{ ai_gen_id }} {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: {{ block.settings.indicator_color }};
    opacity: 0.3;
    cursor: pointer;
    transition: all 0.3s ease;
    border: none;
    padding: 0;
  }

  .ai-offer-cards__indicator-{{ ai_gen_id }}.active {
    opacity: 1;
    width: 20px;
    border-radius: 3px;
  }

  @media screen and (max-width: 989px) {
    .ai-offer-card-{{ ai_gen_id }} {
      flex: 0 0 calc(50% - 6px);
      min-width: 180px;
    }
  }

  @media screen and (max-width: 749px) {
    .ai-offer-cards-{{ ai_gen_id }} {
      padding: 24px 0;
    }

    .ai-offer-cards__header-{{ ai_gen_id }} {
      padding: 0 16px;
    }

    .ai-offer-cards__carousel-{{ ai_gen_id }} {
      padding: 8px 16px;
      scroll-padding-left: 16px;
    }

    .ai-offer-card-{{ ai_gen_id }} {
      flex: 0 0 240px;
      min-width: 240px;
      max-width: 240px;
      scroll-snap-align: center;
    }

    .ai-offer-card-{{ ai_gen_id }}:first-child {
      margin-left: calc(50% - 120px - 16px);
    }

    .ai-offer-card-{{ ai_gen_id }}:last-child {
      margin-right: calc(50% - 120px - 16px);
    }

    .ai-offer-cards__title-{{ ai_gen_id }} {
      font-size: calc({{ block.settings.title_size }}px * 0.75);
    }

    .ai-offer-card__discount-{{ ai_gen_id }} {
      font-size: calc({{ block.settings.discount_size }}px * 0.8);
    }
  }
{% endstyle %}

<offer-cards-{{ ai_gen_id }} class="ai-offer-cards-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-offer-cards__container-{{ ai_gen_id }}">
    {% if block.settings.title != blank or block.settings.subtitle != blank %}
      <div class="ai-offer-cards__header-{{ ai_gen_id }}">
        {% if block.settings.title != blank %}
          <h2 class="ai-offer-cards__title-{{ ai_gen_id }}">{{ block.settings.title }}</h2>
        {% endif %}
        {% if block.settings.subtitle != blank %}
          <p class="ai-offer-cards__subtitle-{{ ai_gen_id }}">{{ block.settings.subtitle }}</p>
        {% endif %}
      </div>
    {% endif %}

    <div class="ai-offer-cards__carousel-wrapper-{{ ai_gen_id }}">
      <div class="ai-offer-cards__carousel-{{ ai_gen_id }}" data-carousel>
        {% for i in (1..6) %}
          {% liquid
            assign offer_enabled_key = 'offer_' | append: i | append: '_enabled'
            assign offer_badge_key = 'offer_' | append: i | append: '_badge'
            assign offer_discount_key = 'offer_' | append: i | append: '_discount'
            assign offer_description_key = 'offer_' | append: i | append: '_description'
            assign offer_code_key = 'offer_' | append: i | append: '_code'
            assign offer_expiry_key = 'offer_' | append: i | append: '_expiry'

            assign offer_enabled = block.settings[offer_enabled_key]
            assign offer_badge = block.settings[offer_badge_key]
            assign offer_discount = block.settings[offer_discount_key]
            assign offer_description = block.settings[offer_description_key]
            assign offer_code = block.settings[offer_code_key]
            assign offer_expiry = block.settings[offer_expiry_key]
          %}

          {% if offer_enabled %}
            <div class="ai-offer-card-{{ ai_gen_id }}" data-card-index="{{ forloop.index0 }}">
              {% if offer_badge != blank %}
                <span class="ai-offer-card__badge-{{ ai_gen_id }}">{{ offer_badge }}</span>
              {% endif %}

              {% if offer_discount != blank %}
                <h3 class="ai-offer-card__discount-{{ ai_gen_id }}">{{ offer_discount }}</h3>
              {% endif %}

              {% if offer_description != blank %}
                <p class="ai-offer-card__description-{{ ai_gen_id }}">{{ offer_description }}</p>
              {% endif %}

              {% if offer_code != blank %}
                <div class="ai-offer-card__code-wrapper-{{ ai_gen_id }}">
                  <div class="ai-offer-card__code-{{ ai_gen_id }}">{{ offer_code }}</div>
                  <button
                    class="ai-offer-card__copy-btn-{{ ai_gen_id }}"
                    data-code="{{ offer_code }}"
                    aria-label="Copy coupon code"
                  >
                    {{ block.settings.copy_button_text }}
                  </button>
                </div>
              {% endif %}

              {% if offer_expiry != blank %}
                <p class="ai-offer-card__expiry-{{ ai_gen_id }}">{{ offer_expiry }}</p>
              {% endif %}
            </div>
          {% endif %}
        {% endfor %}
      </div>

      <div class="ai-offer-cards__indicators-{{ ai_gen_id }}" data-indicators></div>
    </div>
  </div>
</offer-cards-{{ ai_gen_id }}>

<script>
  (function() {
    class OfferCards{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
        this.carousel = this.querySelector('[data-carousel]');
        this.indicatorsContainer = this.querySelector('[data-indicators]');
        this.cards = this.querySelectorAll('.ai-offer-card-{{ ai_gen_id }}');
        this.currentIndex = 0;
      }

      connectedCallback() {
        this.setupCopyButtons();
        this.setupCarousel();
        this.setupIndicators();
      }

      setupCopyButtons() {
        const copyButtons = this.querySelectorAll('.ai-offer-card__copy-btn-{{ ai_gen_id }}');
        
        copyButtons.forEach(button => {
          button.addEventListener('click', () => {
            const code = button.getAttribute('data-code');
            const originalText = button.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
              button.classList.add('copied');
              button.textContent = '{{ block.settings.copied_button_text }}';
              
              setTimeout(() => {
                button.classList.remove('copied');
                button.textContent = originalText;
              }, 2000);
            }).catch(() => {
              const textArea = document.createElement('textarea');
              textArea.value = code;
              textArea.style.position = 'fixed';
              textArea.style.left = '-999999px';
              document.body.appendChild(textArea);
              textArea.select();
              
              try {
                document.execCommand('copy');
                button.classList.add('copied');
                button.textContent = '{{ block.settings.copied_button_text }}';
                
                setTimeout(() => {
                  button.classList.remove('copied');
                  button.textContent = originalText;
                }, 2000);
              } catch (err) {
                console.error('Failed to copy code');
              }
              
              document.body.removeChild(textArea);
            });
          });
        });
      }

      setupCarousel() {
        if (!this.carousel) return;

        this.carousel.addEventListener('scroll', () => {
          this.updateActiveIndicator();
        });
      }

      setupIndicators() {
        if (!this.indicatorsContainer || this.cards.length === 0) return;

        this.cards.forEach((card, index) => {
          const indicator = document.createElement('button');
          indicator.classList.add('ai-offer-cards__indicator-{{ ai_gen_id }}');
          indicator.setAttribute('aria-label', 'Go to offer ' + (index + 1));
          
          if (index === 0) {
            indicator.classList.add('active');
          }

          indicator.addEventListener('click', () => {
            this.scrollToCard(index);
          });

          this.indicatorsContainer.appendChild(indicator);
        });
      }

      scrollToCard(index) {
        const card = this.cards[index];
        if (card) {
          card.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        }
      }

      updateActiveIndicator() {
        const scrollLeft = this.carousel.scrollLeft;
        const cardWidth = this.cards[0].offsetWidth;
        const gap = 12;
        const newIndex = Math.round(scrollLeft / (cardWidth + gap));

        if (newIndex !== this.currentIndex) {
          this.currentIndex = newIndex;
          
          const indicators = this.indicatorsContainer.querySelectorAll('.ai-offer-cards__indicator-{{ ai_gen_id }}');
          indicators.forEach((indicator, index) => {
            if (index === this.currentIndex) {
              indicator.classList.add('active');
            } else {
              indicator.classList.remove('active');
            }
          });
        }
      }
    }

    customElements.define('offer-cards-{{ ai_gen_id }}', OfferCards{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Offer cards carousel",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Section header"
    },
    {
      "type": "inline_richtext",
      "id": "title",
      "label": "Title",
      "default": "Special Offers"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Title size",
      "default": 36
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title color",
      "default": "#000000"
    },
    {
      "type": "inline_richtext",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Don't miss out on these amazing deals"
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Subtitle size",
      "default": 16
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Subtitle color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Card style"
    },
    {
      "type": "color",
      "id": "section_background",
      "label": "Section background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card background",
      "default": "#fffbf5"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#ff8c00"
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 1,
      "max": 4,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 2
    },
    {
      "type": "range",
      "id": "card_border_radius",
      "min": 0,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Card corner radius",
      "default": 16
    },
    {
      "type": "header",
      "content": "Badge"
    },
    {
      "type": "color",
      "id": "badge_background",
      "label": "Background",
      "default": "#ff8c00"
    },
    {
      "type": "color",
      "id": "badge_text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Discount text"
    },
    {
      "type": "range",
      "id": "discount_size",
      "min": 20,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Size",
      "default": 32
    },
    {
      "type": "color",
      "id": "discount_color",
      "label": "Color",
      "default": "#ff8c00"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Coupon code"
    },
    {
      "type": "color",
      "id": "code_background",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "code_border_color",
      "label": "Border color",
      "default": "#ff8c00"
    },
    {
      "type": "color",
      "id": "code_text_color",
      "label": "Text color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Copy button"
    },
    {
      "type": "inline_richtext",
      "id": "copy_button_text",
      "label": "Button text",
      "default": "Copy"
    },
    {
      "type": "inline_richtext",
      "id": "copied_button_text",
      "label": "Copied text",
      "default": "Copied!"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Background",
      "default": "#ff8c00"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_background",
      "label": "Hover background",
      "default": "#e67e00"
    },
    {
      "type": "color",
      "id": "success_color",
      "label": "Success color",
      "default": "#00a341"
    },
    {
      "type": "header",
      "content": "Other"
    },
    {
      "type": "color",
      "id": "expiry_color",
      "label": "Expiry text color",
      "default": "#999999"
    },
    {
      "type": "color",
      "id": "indicator_color",
      "label": "Carousel indicator color",
      "default": "#ff8c00"
    },
    {
      "type": "header",
      "content": "Offer 1"
    },
    {
      "type": "checkbox",
      "id": "offer_1_enabled",
      "label": "Enable offer 1",
      "default": true
    },
    {
      "type": "text",
      "id": "offer_1_badge",
      "label": "Badge text",
      "default": "Limited Time"
    },
    {
      "type": "text",
      "id": "offer_1_discount",
      "label": "Discount text",
      "default": "20% OFF"
    },
    {
      "type": "textarea",
      "id": "offer_1_description",
      "label": "Description",
      "default": "Get 20% off on all products. Use code at checkout."
    },
    {
      "type": "text",
      "id": "offer_1_code",
      "label": "Coupon code",
      "default": "SAVE20"
    },
    {
      "type": "text",
      "id": "offer_1_expiry",
      "label": "Expiry text",
      "default": "Valid until Dec 31, 2025"
    },
    {
      "type": "header",
      "content": "Offer 2"
    },
    {
      "type": "checkbox",
      "id": "offer_2_enabled",
      "label": "Enable offer 2",
      "default": true
    },
    {
      "type": "text",
      "id": "offer_2_badge",
      "label": "Badge text",
      "default": "New Customer"
    },
    {
      "type": "text",
      "id": "offer_2_discount",
      "label": "Discount text",
      "default": "15% OFF"
    },
    {
      "type": "textarea",
      "id": "offer_2_description",
      "label": "Description",
      "default": "First order discount for new customers only."
    },
    {
      "type": "text",
      "id": "offer_2_code",
      "label": "Coupon code",
      "default": "WELCOME15"
    },
    {
      "type": "text",
      "id": "offer_2_expiry",
      "label": "Expiry text",
      "default": "Valid for 30 days"
    },
    {
      "type": "header",
      "content": "Offer 3"
    },
    {
      "type": "checkbox",
      "id": "offer_3_enabled",
      "label": "Enable offer 3",
      "default": true
    },
    {
      "type": "text",
      "id": "offer_3_badge",
      "label": "Badge text",
      "default": "Free Shipping"
    },
    {
      "type": "text",
      "id": "offer_3_discount",
      "label": "Discount text",
      "default": "FREE DELIVERY"
    },
    {
      "type": "textarea",
      "id": "offer_3_description",
      "label": "Description",
      "default": "Free shipping on orders over $50. No minimum required."
    },
    {
      "type": "text",
      "id": "offer_3_code",
      "label": "Coupon code",
      "default": "FREESHIP"
    },
    {
      "type": "text",
      "id": "offer_3_expiry",
      "label": "Expiry text",
      "default": "Always available"
    },
    {
      "type": "header",
      "content": "Offer 4"
    },
    {
      "type": "checkbox",
      "id": "offer_4_enabled",
      "label": "Enable offer 4",
      "default": false
    },
    {
      "type": "text",
      "id": "offer_4_badge",
      "label": "Badge text"
    },
    {
      "type": "text",
      "id": "offer_4_discount",
      "label": "Discount text"
    },
    {
      "type": "textarea",
      "id": "offer_4_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "offer_4_code",
      "label": "Coupon code"
    },
    {
      "type": "text",
      "id": "offer_4_expiry",
      "label": "Expiry text"
    },
    {
      "type": "header",
      "content": "Offer 5"
    },
    {
      "type": "checkbox",
      "id": "offer_5_enabled",
      "label": "Enable offer 5",
      "default": false
    },
    {
      "type": "text",
      "id": "offer_5_badge",
      "label": "Badge text"
    },
    {
      "type": "text",
      "id": "offer_5_discount",
      "label": "Discount text"
    },
    {
      "type": "textarea",
      "id": "offer_5_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "offer_5_code",
      "label": "Coupon code"
    },
    {
      "type": "text",
      "id": "offer_5_expiry",
      "label": "Expiry text"
    },
    {
      "type": "header",
      "content": "Offer 6"
    },
    {
      "type": "checkbox",
      "id": "offer_6_enabled",
      "label": "Enable offer 6",
      "default": false
    },
    {
      "type": "text",
      "id": "offer_6_badge",
      "label": "Badge text"
    },
    {
      "type": "text",
      "id": "offer_6_discount",
      "label": "Discount text"
    },
    {
      "type": "textarea",
      "id": "offer_6_description",
      "label": "Description"
    },
    {
      "type": "text",
      "id": "offer_6_code",
      "label": "Coupon code"
    },
    {
      "type": "text",
      "id": "offer_6_expiry",
      "label": "Expiry text"
    }
  ],
  "presets": [
    {
      "name": "Offer cards carousel"
    }
  ]
}
{% endschema %}