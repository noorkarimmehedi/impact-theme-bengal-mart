{% doc %}
  @prompt
    Design a modern, minimal hero section for a fashion or lifestyle e-commerce website. Use a full-screen background image featuring soft natural textures (like sand, grass, or objects) with warm lighting and depth. Overlay bold, white uppercase headline text centered on the lower half — e.g., ‘QUIET OBJECTS, LOUD INTENTIONS’.
    
    Below the headline, include two large rectangular CTA buttons stacked vertically:
    
    The first button (‘SHOP PHASE 3’) has a solid bright blue background with white bold text.
    
    The second button (‘SHOP ALL’) has a white background with blue text and a thin blue border.
    
    Add three small circular pagination indicators (carousel dots) centered at the bottom, with the active one filled blue and others outlined. Maintain high contrast for legibility, balanced spacing, and a minimal, editorial feel. Ensure mobile responsiveness with smooth transitions between slides.
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-hero-carousel-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
  }

  .ai-hero-carousel__slides-{{ ai_gen_id }} {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .ai-hero-carousel__slide-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.6s ease-in-out, visibility 0.6s ease-in-out;
  }

  .ai-hero-carousel__slide-{{ ai_gen_id }}.active {
    opacity: 1;
    visibility: visible;
    z-index: 1;
  }

  .ai-hero-carousel__image-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-hero-carousel__image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    background-color: #e8e4dc;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-hero-carousel__image-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    max-width: 600px;
    max-height: 600px;
    opacity: 0.3;
  }

  .ai-hero-carousel__overlay-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, {{ block.settings.overlay_opacity | divided_by: 100.0 }}) 100%);
    z-index: 2;
  }

  .ai-hero-carousel__content-{{ ai_gen_id }} {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 3;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0 20px {{ block.settings.content_bottom_spacing }}px;
    text-align: center;
  }

  .ai-hero-carousel__headline-{{ ai_gen_id }} {
    color: {{ block.settings.headline_color }};
    font-size: {{ block.settings.headline_size_mobile }}px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: {{ block.settings.headline_letter_spacing }}px;
    line-height: 1.1;
    margin: 0 0 {{ block.settings.headline_spacing }}px;
    max-width: 100%;
  }

  .ai-hero-carousel__buttons-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    gap: {{ block.settings.button_gap }}px;
    width: 100%;
    max-width: {{ block.settings.button_max_width }}px;
    margin-bottom: {{ block.settings.buttons_bottom_spacing }}px;
  }

  .ai-hero-carousel__button-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: {{ block.settings.button_padding_vertical }}px {{ block.settings.button_padding_horizontal }}px;
    font-size: {{ block.settings.button_font_size }}px;
    font-weight: 700;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
    border-radius: {{ block.settings.button_border_radius }}px;
    cursor: pointer;
  }

  .ai-hero-carousel__button--primary-{{ ai_gen_id }} {
    background-color: {{ block.settings.primary_button_bg }};
    color: {{ block.settings.primary_button_text }};
    border: 2px solid {{ block.settings.primary_button_bg }};
  }

  .ai-hero-carousel__button--primary-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.primary_button_hover_bg }};
    border-color: {{ block.settings.primary_button_hover_bg }};
  }

  .ai-hero-carousel__button--secondary-{{ ai_gen_id }} {
    background-color: {{ block.settings.secondary_button_bg }};
    color: {{ block.settings.secondary_button_text }};
    border: 2px solid {{ block.settings.secondary_button_border }};
  }

  .ai-hero-carousel__button--secondary-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.secondary_button_hover_bg }};
    color: {{ block.settings.secondary_button_hover_text }};
    border-color: {{ block.settings.secondary_button_hover_border }};
  }

  .ai-hero-carousel__pagination-{{ ai_gen_id }} {
    display: flex;
    gap: {{ block.settings.dot_spacing }}px;
    justify-content: center;
    align-items: center;
    z-index: 3;
  }

  .ai-hero-carousel__dot-{{ ai_gen_id }} {
    width: {{ block.settings.dot_size }}px;
    height: {{ block.settings.dot_size }}px;
    border-radius: 50%;
    background-color: transparent;
    border: 2px solid {{ block.settings.dot_inactive_color }};
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0;
  }

  .ai-hero-carousel__dot-{{ ai_gen_id }}.active {
    background-color: {{ block.settings.dot_active_color }};
    border-color: {{ block.settings.dot_active_color }};
  }

  .ai-hero-carousel__dot-{{ ai_gen_id }}:hover {
    transform: scale(1.2);
  }

  @media screen and (min-width: 750px) {
    .ai-hero-carousel__headline-{{ ai_gen_id }} {
      font-size: {{ block.settings.headline_size_desktop }}px;
    }

    .ai-hero-carousel__content-{{ ai_gen_id }} {
      padding-bottom: {{ block.settings.content_bottom_spacing | times: 1.5 }}px;
    }

    .ai-hero-carousel__buttons-{{ ai_gen_id }} {
      margin-bottom: {{ block.settings.buttons_bottom_spacing | times: 1.2 }}px;
    }
  }

  @media screen and (min-width: 990px) {
    .ai-hero-carousel__buttons-{{ ai_gen_id }} {
      flex-direction: row;
      max-width: {{ block.settings.button_max_width | times: 2 | plus: block.settings.button_gap }}px;
    }

    .ai-hero-carousel__button-{{ ai_gen_id }} {
      flex: 1;
    }
  }
{% endstyle %}

<hero-carousel-{{ ai_gen_id }} class="ai-hero-carousel-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-hero-carousel__slides-{{ ai_gen_id }}">
    {% for i in (1..3) %}
      {% liquid
        assign slide_image_key = 'slide_' | append: i | append: '_image'
        assign slide_headline_key = 'slide_' | append: i | append: '_headline'
        assign slide_primary_text_key = 'slide_' | append: i | append: '_primary_button_text'
        assign slide_primary_link_key = 'slide_' | append: i | append: '_primary_button_link'
        assign slide_secondary_text_key = 'slide_' | append: i | append: '_secondary_button_text'
        assign slide_secondary_link_key = 'slide_' | append: i | append: '_secondary_button_link'

        assign slide_image = block.settings[slide_image_key]
        assign slide_headline = block.settings[slide_headline_key]
        assign slide_primary_text = block.settings[slide_primary_text_key]
        assign slide_primary_link = block.settings[slide_primary_link_key]
        assign slide_secondary_text = block.settings[slide_secondary_text_key]
        assign slide_secondary_link = block.settings[slide_secondary_link_key]
      %}

      <div class="ai-hero-carousel__slide-{{ ai_gen_id }} {% if i == 1 %}active{% endif %}" data-slide="{{ i }}">
        {% if slide_image %}
          <img
            src="{{ slide_image | image_url: width: 2400 }}"
            alt="{{ slide_image.alt | escape }}"
            loading="{% if i == 1 %}eager{% else %}lazy{% endif %}"
            width="{{ slide_image.width }}"
            height="{{ slide_image.height }}"
            class="ai-hero-carousel__image-{{ ai_gen_id }}"
          >
        {% else %}
          <div class="ai-hero-carousel__image-placeholder-{{ ai_gen_id }}">
            {{ 'hero-apparel-1' | placeholder_svg_tag }}
          </div>
        {% endif %}

        <div class="ai-hero-carousel__overlay-{{ ai_gen_id }}"></div>

        <div class="ai-hero-carousel__content-{{ ai_gen_id }}">
          {% if slide_headline != blank %}
            <h1 class="ai-hero-carousel__headline-{{ ai_gen_id }}">{{ slide_headline }}</h1>
          {% endif %}

          <div class="ai-hero-carousel__buttons-{{ ai_gen_id }}">
            {% if slide_primary_text != blank %}
              <a
                href="{{ slide_primary_link }}"
                class="ai-hero-carousel__button-{{ ai_gen_id }} ai-hero-carousel__button--primary-{{ ai_gen_id }}"
              >
                {{ slide_primary_text }}
              </a>
            {% endif %}

            {% if slide_secondary_text != blank %}
              <a
                href="{{ slide_secondary_link }}"
                class="ai-hero-carousel__button-{{ ai_gen_id }} ai-hero-carousel__button--secondary-{{ ai_gen_id }}"
              >
                {{ slide_secondary_text }}
              </a>
            {% endif %}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <div class="ai-hero-carousel__pagination-{{ ai_gen_id }}">
    {% for i in (1..3) %}
      <button
        class="ai-hero-carousel__dot-{{ ai_gen_id }} {% if i == 1 %}active{% endif %}"
        data-slide="{{ i }}"
        aria-label="Go to slide {{ i }}"
      ></button>
    {% endfor %}
  </div>
</hero-carousel-{{ ai_gen_id }}>

<script>
  (function() {
    class HeroCarousel{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
        this.currentSlide = 1;
        this.totalSlides = 3;
        this.autoplayInterval = null;
      }

      connectedCallback() {
        this.slides = this.querySelectorAll('.ai-hero-carousel__slide-{{ ai_gen_id }}');
        this.dots = this.querySelectorAll('.ai-hero-carousel__dot-{{ ai_gen_id }}');
        this.autoplayEnabled = {{ block.settings.enable_autoplay | json }};
        this.autoplayDelay = {{ block.settings.autoplay_delay | times: 1000 }};

        this.setupEventListeners();
        
        if (this.autoplayEnabled) {
          this.startAutoplay();
          this.setupPauseOnHover();
        }
      }

      setupEventListeners() {
        this.dots.forEach((dot) => {
          dot.addEventListener('click', () => {
            const slideNumber = parseInt(dot.getAttribute('data-slide'));
            this.goToSlide(slideNumber);
            if (this.autoplayEnabled) {
              this.resetAutoplay();
            }
          });
        });
      }

      goToSlide(slideNumber) {
        this.slides.forEach((slide) => {
          slide.classList.remove('active');
        });

        this.dots.forEach((dot) => {
          dot.classList.remove('active');
        });

        const targetSlide = this.querySelector(`[data-slide="${slideNumber}"].ai-hero-carousel__slide-{{ ai_gen_id }}`);
        const targetDot = this.querySelector(`[data-slide="${slideNumber}"].ai-hero-carousel__dot-{{ ai_gen_id }}`);

        if (targetSlide) targetSlide.classList.add('active');
        if (targetDot) targetDot.classList.add('active');

        this.currentSlide = slideNumber;
      }

      nextSlide() {
        const next = this.currentSlide >= this.totalSlides ? 1 : this.currentSlide + 1;
        this.goToSlide(next);
      }

      startAutoplay() {
        this.autoplayInterval = setInterval(() => {
          this.nextSlide();
        }, this.autoplayDelay);
      }

      stopAutoplay() {
        if (this.autoplayInterval) {
          clearInterval(this.autoplayInterval);
          this.autoplayInterval = null;
        }
      }

      resetAutoplay() {
        this.stopAutoplay();
        this.startAutoplay();
      }

      setupPauseOnHover() {
        this.addEventListener('mouseenter', () => {
          this.stopAutoplay();
        });

        this.addEventListener('mouseleave', () => {
          this.startAutoplay();
        });
      }

      disconnectedCallback() {
        this.stopAutoplay();
      }
    }

    customElements.define('hero-carousel-{{ ai_gen_id }}', HeroCarousel{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Hero carousel",
  "settings": [
    {
      "type": "header",
      "content": "Slide 1"
    },
    {
      "type": "image_picker",
      "id": "slide_1_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "slide_1_headline",
      "label": "Headline",
      "default": "QUIET OBJECTS, LOUD INTENTIONS"
    },
    {
      "type": "text",
      "id": "slide_1_primary_button_text",
      "label": "Primary button text",
      "default": "SHOP PHASE 3"
    },
    {
      "type": "url",
      "id": "slide_1_primary_button_link",
      "label": "Primary button link"
    },
    {
      "type": "text",
      "id": "slide_1_secondary_button_text",
      "label": "Secondary button text",
      "default": "SHOP ALL"
    },
    {
      "type": "url",
      "id": "slide_1_secondary_button_link",
      "label": "Secondary button link"
    },
    {
      "type": "header",
      "content": "Slide 2"
    },
    {
      "type": "image_picker",
      "id": "slide_2_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "slide_2_headline",
      "label": "Headline",
      "default": "TIMELESS DESIGN, MODERN LIVING"
    },
    {
      "type": "text",
      "id": "slide_2_primary_button_text",
      "label": "Primary button text",
      "default": "EXPLORE NOW"
    },
    {
      "type": "url",
      "id": "slide_2_primary_button_link",
      "label": "Primary button link"
    },
    {
      "type": "text",
      "id": "slide_2_secondary_button_text",
      "label": "Secondary button text",
      "default": "VIEW COLLECTION"
    },
    {
      "type": "url",
      "id": "slide_2_secondary_button_link",
      "label": "Secondary button link"
    },
    {
      "type": "header",
      "content": "Slide 3"
    },
    {
      "type": "image_picker",
      "id": "slide_3_image",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "slide_3_headline",
      "label": "Headline",
      "default": "CRAFTED WITH INTENTION"
    },
    {
      "type": "text",
      "id": "slide_3_primary_button_text",
      "label": "Primary button text",
      "default": "DISCOVER MORE"
    },
    {
      "type": "url",
      "id": "slide_3_primary_button_link",
      "label": "Primary button link"
    },
    {
      "type": "text",
      "id": "slide_3_secondary_button_text",
      "label": "Secondary button text",
      "default": "LEARN MORE"
    },
    {
      "type": "url",
      "id": "slide_3_secondary_button_link",
      "label": "Secondary button link"
    },
    {
      "type": "header",
      "content": "Headline style"
    },
    {
      "type": "color",
      "id": "headline_color",
      "label": "Color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "headline_size_mobile",
      "min": 24,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Size (mobile)",
      "default": 32
    },
    {
      "type": "range",
      "id": "headline_size_desktop",
      "min": 40,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Size (desktop)",
      "default": 72
    },
    {
      "type": "range",
      "id": "headline_letter_spacing",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Letter spacing",
      "default": 2
    },
    {
      "type": "range",
      "id": "headline_spacing",
      "min": 20,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Bottom spacing",
      "default": 40
    },
    {
      "type": "header",
      "content": "Primary button style"
    },
    {
      "type": "color",
      "id": "primary_button_bg",
      "label": "Background",
      "default": "#0066ff"
    },
    {
      "type": "color",
      "id": "primary_button_text",
      "label": "Text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "primary_button_hover_bg",
      "label": "Hover background",
      "default": "#0052cc"
    },
    {
      "type": "header",
      "content": "Secondary button style"
    },
    {
      "type": "color",
      "id": "secondary_button_bg",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "secondary_button_text",
      "label": "Text",
      "default": "#0066ff"
    },
    {
      "type": "color",
      "id": "secondary_button_border",
      "label": "Border",
      "default": "#0066ff"
    },
    {
      "type": "color",
      "id": "secondary_button_hover_bg",
      "label": "Hover background",
      "default": "#0066ff"
    },
    {
      "type": "color",
      "id": "secondary_button_hover_text",
      "label": "Hover text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "secondary_button_hover_border",
      "label": "Hover border",
      "default": "#0066ff"
    },
    {
      "type": "header",
      "content": "Button settings"
    },
    {
      "type": "range",
      "id": "button_font_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 16
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "min": 10,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Vertical padding",
      "default": 18
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "min": 20,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Horizontal padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 0
    },
    {
      "type": "range",
      "id": "button_gap",
      "min": 8,
      "max": 32,
      "step": 4,
      "unit": "px",
      "label": "Gap between buttons",
      "default": 16
    },
    {
      "type": "range",
      "id": "button_max_width",
      "min": 200,
      "max": 500,
      "step": 20,
      "unit": "px",
      "label": "Max width",
      "default": 320
    },
    {
      "type": "header",
      "content": "Pagination dots"
    },
    {
      "type": "range",
      "id": "dot_size",
      "min": 8,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Size",
      "default": 12
    },
    {
      "type": "range",
      "id": "dot_spacing",
      "min": 6,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Spacing",
      "default": 10
    },
    {
      "type": "color",
      "id": "dot_active_color",
      "label": "Active color",
      "default": "#0066ff"
    },
    {
      "type": "color",
      "id": "dot_inactive_color",
      "label": "Inactive color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "%",
      "label": "Overlay opacity",
      "default": 30
    },
    {
      "type": "range",
      "id": "content_bottom_spacing",
      "min": 40,
      "max": 160,
      "step": 10,
      "unit": "px",
      "label": "Content bottom spacing",
      "default": 80
    },
    {
      "type": "range",
      "id": "buttons_bottom_spacing",
      "min": 20,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Buttons bottom spacing",
      "default": 40
    },
    {
      "type": "header",
      "content": "Carousel settings"
    },
    {
      "type": "checkbox",
      "id": "enable_autoplay",
      "label": "Enable autoplay",
      "default": true
    },
    {
      "type": "range",
      "id": "autoplay_delay",
      "min": 3,
      "max": 10,
      "step": 1,
      "unit": "s",
      "label": "Autoplay delay",
      "default": 5
    }
  ],
  "presets": [
    {
      "name": "Hero carousel"
    }
  ]
}
{% endschema %}